<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>동물상 테스트</title>
    <link rel="stylesheet" href="style.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4338605833549006"
     crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-4338605833549006">
</head>
<body>
    <header>
        <nav>
            <a href="index.html">동물상 테스트</a>
            <a href="dinner.html">저녁 메뉴 추천</a>
            <a href="content.html">콘텐츠</a>
            <a href="about.html">소개</a>
            <a href="privacy.html">개인정보처리방침</a>
        </nav>
    </header>

    <main>
        <h1>동물상 테스트</h1>
        <p>당신의 얼굴은 강아지상일까요, 고양이상일까요? 사진을 업로드하여 인공지능이 판단하는 당신의 동물상을 확인해보세요!</p>
        
        <div class="tool-container">
            <input type="file" id="imageUpload" accept="image/*" />
            <div id="image-container"></div>
            <div id="label-container"></div>
        </div>

        <div class="adsense-placeholder">
            <!-- 동물상 테스트 광고 단위 (사용자 계정에서 생성 후 data-ad-slot 값 변경 필요) -->
            <ins class="adsbygoogle"
                 style="display:block; text-align:center;"
                 data-ad-layout="in-article"
                 data-ad-format="fluid"
                 data-ad-client="ca-pub-4338605833549006"
                 data-ad-slot="YOUR_AD_SLOT_ID_HERE"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <div class="content-section">
            <h2>✨ 당신의 동물상은 무엇인가요?</h2>
            <p>사람들은 흔히 얼굴 생김새나 분위기에 따라 '강아지상', '고양이상', '토끼상', '공룡상' 등 다양한 동물에 비유하곤 합니다. 이것은 과학적인 근거는 없지만, 각 동물이 가진 이미지와 사람의 특징을 연결하여 재미로 즐기는 일종의 놀이 문화입니다.</p>
            <ul>
                <li><strong>🐶 강아지상:</strong> 선하고 귀여운 눈매, 동글동글한 얼굴선이 특징입니다. 친근하고 사랑스러운 분위기를 풍깁니다.</li>
                <li><strong>🐱 고양이상:</strong> 날카롭고 섹시한 눈매, 갸름한 얼굴선이 특징입니다. 도도하고 시크한 분위기를 자아냅니다.</li>
            </ul>
            <p>저희 테스트는 인공지능을 통해 당신의 얼굴이 강아지상과 고양이상 중 어느 쪽에 더 가까운지 분석해드립니다. 지금 바로 사진을 업로드하고 결과를 확인해보세요!</p>
            
            <h2>테스트는 어떻게 진행되나요?</h2>
            <p>이 테스트는 Google의 Teachable Machine을 기반으로 한 인공지능 모델을 사용합니다. 수백 장의 강아지와 고양이 사진을 학습한 모델이 당신의 사진 특징을 분석하여 결과를 알려줍니다. 모든 과정은 당신의 브라우저에서만 실행되며, 사진은 어디에도 전송되거나 저장되지 않습니다.</p>
            <p>더 자세한 정보는 <a href="about.html">소개 페이지</a>를 확인해주세요. 또한, 동물상에 대한 더 재미있는 이야기가 궁금하다면 <a href="content.html">콘텐츠 페이지</a>를 방문해보세요!</p>
        </div>
    </main>

    <footer>
        <p>&copy; 2026 동물상 테스트. 모든 권리 보유.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
    <script type="text/javascript">
        const URL = "https://teachablemachine.withgoogle.com/models/AEP282Xz6/";
        let model, labelContainer, maxPredictions;

        async function init() {
            const modelURL = URL + "model.json";
            const metadataURL = URL + "metadata.json";
            model = await tmImage.load(modelURL, metadataURL);
            maxPredictions = model.getTotalClasses();
            labelContainer = document.getElementById("label-container");
            for (let i = 0; i < maxPredictions; i++) {
                labelContainer.appendChild(document.createElement("div"));
            }
        }

        async function predict(image) {
            const prediction = await model.predict(image);
            for (let i = 0; i < maxPredictions; i++) {
                const classPrediction =
                    prediction[i].className + ": " + (prediction[i].probability * 100).toFixed(0) + "%";
                labelContainer.childNodes[i].innerHTML = classPrediction;
            }
        }

        // Initialize the model when the page loads
        init();

        document.getElementById("imageUpload").addEventListener("change", async (event) => {
            const files = event.target.files;
            if (files && files.length > 0) {
                const imageContainer = document.getElementById("image-container");
                imageContainer.innerHTML = ''; // Clear previous image
                const image = document.createElement('img');
                const reader = new FileReader();
                reader.onload = (e) => {
                    image.src = e.target.result;
                    image.width = 200;
                    image.height = 200;
                    imageContainer.appendChild(image);
                    image.onload = () => predict(image); // Run prediction after image is loaded
                };
                reader.readAsDataURL(files[0]);
            }
        });
    </script>
</body>
</html>